{
  "state_machines": {
    "arn:aws:states:us-east-1:389435993474:stateMachine:ExportWorkflow-riXSCKbzZE1g": {
      "name": "ExportWorkflow-riXSCKbzZE1g",
      "arn": "arn:aws:states:us-east-1:389435993474:stateMachine:ExportWorkflow-riXSCKbzZE1g",
      "definition": "{\n  \"Comment\": \"porter-cognito-export-import 1.0.4.2: Backs up User Profiles, Groups and Group Memberships to a DynamoDB Global Table\",\n  \"StartAt\": \"CheckExecutionsLambda\",\n  \"States\": {\n    \"CheckExecutionsLambda\": {\n      \"Type\": \"Task\",\n      \"Resource\": \"arn:aws:lambda:us-east-1:389435993474:function:StackSet-porter-cognito-expo-CheckExecutionsLambda-hKnPasElXQEe\",\n      \"Parameters\": {\n        \"Input.$\": \"$\",\n        \"Context.$\": \"$$\"\n      },\n      \"OutputPath\": \"$.result\",\n      \"Next\": \"Only this execution running for this state machine?\",\n      \"Catch\": [\n        {\n          \"ErrorEquals\": [\n            \"States.TaskFailed\"\n          ],\n          \"Next\": \"WorkflowErrorHandlerLambda\"\n        }\n      ]\n    },\n    \"Only this execution running for this state machine?\": {\n      \"Type\": \"Choice\",\n      \"Choices\": [\n        {\n          \"Variable\": \"$.OnlyThisStateMachineExecution\",\n          \"BooleanEquals\": true,\n          \"Next\": \"Yes - only this execution is running\"\n        }\n      ],\n      \"Default\": \"No - at least one other execution is running\"\n    },\n    \"Yes - only this execution is running\": {\n      \"Type\": \"Pass\",\n      \"Next\": \"CheckUserPoolConfigLambda\"\n    },\n    \"No - at least one other execution is running\": {\n      \"Type\": \"Fail\",\n      \"Error\": \"AnotherExecutionRunning\",\n      \"Cause\": \"At least one other execution for this state machine was found to be running. Please check logs for CheckExecutionsLambda for details\"\n    },\n    \"CheckUserPoolConfigLambda\": {\n      \"Type\": \"Task\",\n      \"Resource\": \"arn:aws:lambda:us-east-1:389435993474:function:StackSet-porter-cognito-e-CheckUserPoolConfigLambd-1qXflHHiHEah\",\n      \"Parameters\": {\n        \"Input.$\": \"$\",\n        \"Context.$\": \"$$\"\n      },\n      \"OutputPath\": \"$.result\",\n      \"Next\": \"ExportUsersLambda\",\n      \"Catch\": [\n        {\n          \"ErrorEquals\": [\n            \"States.TaskFailed\"\n          ],\n          \"Next\": \"WorkflowErrorHandlerLambda\"\n        }\n      ]\n    },\n    \"ExportUsersLambda\": {\n      \"Type\": \"Task\",\n      \"Resource\": \"arn:aws:lambda:us-east-1:389435993474:function:StackSet-porter-cognito-export-i-ExportUsersLambda-Lozzet4QymGL\",\n      \"InputPath\": \"$\",\n      \"OutputPath\": \"$.result\",\n      \"Next\": \"Has ListUsers Next Token?\",\n      \"Catch\": [\n        {\n          \"ErrorEquals\": [\n            \"States.TaskFailed\"\n          ],\n          \"Next\": \"WorkflowErrorHandlerLambda\"\n        }\n      ]\n    },\n    \"Has ListUsers Next Token?\": {\n      \"Type\": \"Choice\",\n      \"Choices\": [\n        {\n          \"Not\": {\n            \"Variable\": \"$.paginationToken\",\n            \"StringEquals\": \"\"\n          },\n          \"Next\": \"Yes - ListUsers\"\n        },\n        {\n          \"Variable\": \"$.paginationToken\",\n          \"StringEquals\": \"\",\n          \"Next\": \"No - ListUsers\"\n        }\n      ],\n      \"Default\": \"No - ListUsers\"\n    },\n    \"Yes - ListUsers\": {\n      \"Type\": \"Pass\",\n      \"Next\": \"Wait 1 sec - ListUsers\"\n    },\n    \"Wait 1 sec - ListUsers\": {\n      \"Comment\": \"A Wait state delays the state machine from continuing for a specified time.\",\n      \"Type\": \"Wait\",\n      \"Seconds\": 1,\n      \"Next\": \"ExportUsersLambda\"\n    },\n    \"No - ListUsers\": {\n      \"Type\": \"Pass\",\n      \"Next\": \"ListGroupsLambda\"\n    },\n    \"ListGroupsLambda\": {\n      \"Type\": \"Task\",\n      \"Resource\": \"arn:aws:lambda:us-east-1:389435993474:function:StackSet-porter-cognito-export-im-ListGroupsLambda-LPjGR4UU1XrY\",\n      \"InputPath\": \"$\",\n      \"Next\": \"Process Groups Map\",\n      \"Catch\": [\n        {\n          \"ErrorEquals\": [\n            \"States.TaskFailed\"\n          ],\n          \"Next\": \"WorkflowErrorHandlerLambda\"\n        }\n      ]\n    },\n    \"Process Groups Map\": {\n      \"Type\": \"Map\",\n      \"ResultPath\": \"$.ProcessedGroups\",\n      \"ItemsPath\": \"$.Groups\",\n      \"Parameters\": {\n        \"groupName.$\": \"$$.Map.Item.Value.groupName\",\n        \"groupDescription.$\": \"$$.Map.Item.Value.groupDescription\",\n        \"groupPrecedence.$\": \"$$.Map.Item.Value.groupPrecedence\",\n        \"groupLastModifiedDate.$\": \"$$.Map.Item.Value.groupLastModifiedDate\",\n        \"UsernameAttributes.$\": \"$$.Map.Item.Value.UsernameAttributes\",\n        \"exportTimestamp.$\": \"$.ExportTimestamp\"\n      },\n      \"Iterator\": {\n        \"StartAt\": \"ExportGroupLambda\",\n        \"States\": {\n          \"ExportGroupLambda\": {\n            \"Type\": \"Task\",\n            \"Resource\": \"arn:aws:lambda:us-east-1:389435993474:function:StackSet-porter-cognito-export-i-ExportGroupLambda-vgKWhxYn6qS0\",\n            \"InputPath\": \"$\",\n            \"Next\": \"ExportUsersInGroupLambda\",\n            \"Catch\": [\n              {\n                \"ErrorEquals\": [\n                  \"States.TaskFailed\"\n                ],\n                \"Next\": \"WorkflowErrorHandlerLambdaGroupsMap\"\n              }\n            ]\n          },\n          \"ExportUsersInGroupLambda\": {\n            \"Type\": \"Task\",\n            \"Resource\": \"arn:aws:lambda:us-east-1:389435993474:function:StackSet-porter-cognito-e-ExportUsersInGroupLambda-t8pnDOGDg9so\",\n            \"InputPath\": \"$\",\n            \"Next\": \"Processed all users in group?\",\n            \"Catch\": [\n              {\n                \"ErrorEquals\": [\n                  \"States.TaskFailed\"\n                ],\n                \"Next\": \"WorkflowErrorHandlerLambdaGroupsMap\"\n              }\n            ]\n          },\n          \"Processed all users in group?\": {\n            \"Type\": \"Choice\",\n            \"Choices\": [\n              {\n                \"Not\": {\n                  \"Variable\": \"$.processedAllUsersInGroup\",\n                  \"StringEquals\": \"Yes\"\n                },\n                \"Next\": \"More users to process in group\"\n              },\n              {\n                \"Variable\": \"$.processedAllUsersInGroup\",\n                \"StringEquals\": \"Yes\",\n                \"Next\": \"All users in group processed\"\n              }\n            ],\n            \"Default\": \"More users to process in group\"\n          },\n          \"More users to process in group\": {\n            \"Type\": \"Pass\",\n            \"Next\": \"Wait 1 second\"\n          },\n          \"Wait 1 second\": {\n            \"Comment\": \"A Wait state delays the state machine from continuing for a specified time.\",\n            \"Type\": \"Wait\",\n            \"Seconds\": 1,\n            \"Next\": \"ExportUsersInGroupLambda\"\n          },\n          \"All users in group processed\": {\n            \"Type\": \"Pass\",\n            \"End\": true\n          },\n          \"WorkflowErrorHandlerLambdaGroupsMap\": {\n            \"Type\": \"Task\",\n            \"Resource\": \"arn:aws:lambda:us-east-1:389435993474:function:StackSet-porter-cognito-e-WorkflowMessageBrokerLam-dfDWVG8f2k8z\",\n            \"Parameters\": {\n              \"Input.$\": \"$\",\n              \"Context.$\": \"$$\"\n            },\n            \"Next\": \"Unexpected workflow error in Groups map\"\n          },\n          \"Unexpected workflow error in Groups map\": {\n            \"Type\": \"Fail\",\n            \"Error\": \"UnexpectedErrorInWorkflow\",\n            \"Cause\": \"An unexpected error occured while executing this workflow. Please check logs for the State Machine task that generated this error for details\"\n          }\n        }\n      },\n      \"MaxConcurrency\": 1,\n      \"Next\": \"Processed all groups?\"\n    },\n    \"Processed all groups?\": {\n      \"Type\": \"Choice\",\n      \"Choices\": [\n        {\n          \"Not\": {\n            \"Variable\": \"$.ProcessedAllGroups\",\n            \"StringEquals\": \"Yes\"\n          },\n          \"Next\": \"More groups to process\"\n        },\n        {\n          \"Variable\": \"$.ProcessedAllGroups\",\n          \"StringEquals\": \"Yes\",\n          \"Next\": \"All groups processed\"\n        }\n      ],\n      \"Default\": \"All groups processed\"\n    },\n    \"More groups to process\": {\n      \"Type\": \"Pass\",\n      \"Next\": \"Wait 1 sec - List Groups\"\n    },\n    \"Wait 1 sec - List Groups\": {\n      \"Comment\": \"A Wait state delays the state machine from continuing for a specified time.\",\n      \"Type\": \"Wait\",\n      \"Seconds\": 1,\n      \"Next\": \"ListGroupsLambda\"\n    },\n    \"All groups processed\": {\n      \"Type\": \"Pass\",\n      \"Next\": \"BackupTableCleanup: Find Items\"\n    },\n    \"BackupTableCleanup: Find Items\": {\n      \"Type\": \"Task\",\n      \"Resource\": \"arn:aws:lambda:us-east-1:389435993474:function:StackSet-porter-cognito-e-BackupTableCleanupLambda-AiOnbpyscHYx\",\n      \"Parameters\": {\n        \"Input.$\": \"$\",\n        \"Context.$\": \"$$\"\n      },\n      \"OutputPath\": \"$.result\",\n      \"Next\": \"BackupTableCleanup: Checked Entire Table?\",\n      \"Catch\": [\n        {\n          \"ErrorEquals\": [\n            \"States.TaskFailed\"\n          ],\n          \"Next\": \"WorkflowErrorHandlerLambda\"\n        }\n      ]\n    },\n    \"BackupTableCleanup: Checked Entire Table?\": {\n      \"Type\": \"Choice\",\n      \"Choices\": [\n        {\n          \"Not\": {\n            \"Variable\": \"$.lastEvaluatedKey\",\n            \"StringEquals\": \"\"\n          },\n          \"Next\": \"BackupTableCleanup: No, not finished checking table\"\n        },\n        {\n          \"Variable\": \"$.lastEvaluatedKey\",\n          \"StringEquals\": \"\",\n          \"Next\": \"BackupTableCleanup: Yes, finished checking table\"\n        }\n      ]\n    },\n    \"BackupTableCleanup: No, not finished checking table\": {\n      \"Type\": \"Pass\",\n      \"Next\": \"BackupTableCleanup: Find Items\"\n    },\n    \"BackupTableCleanup: Yes, finished checking table\": {\n      \"Type\": \"Pass\",\n      \"Next\": \"BackupTableCleanup: Items to remove?\"\n    },\n    \"BackupTableCleanup: Items to remove?\": {\n      \"Type\": \"Choice\",\n      \"Choices\": [\n        {\n          \"Variable\": \"$.NumItemsAddedToQueue\",\n          \"NumericGreaterThan\": 0,\n          \"Next\": \"BackupTableCleanup: Remove Items\"\n        }\n      ],\n      \"Default\": \"WorkflowCleanupLambda\"\n    },\n    \"BackupTableCleanup: Remove Items\": {\n      \"Type\": \"Task\",\n      \"Resource\": \"arn:aws:lambda:us-east-1:389435993474:function:StackSet-porter-cognito-e-BackupTableCleanupLambda-AiOnbpyscHYx\",\n      \"Parameters\": {\n        \"Input.$\": \"$\",\n        \"Context.$\": \"$$\"\n      },\n      \"OutputPath\": \"$.result\",\n      \"Next\": \"BackupTableCleanup: All items removed?\",\n      \"Catch\": [\n        {\n          \"ErrorEquals\": [\n            \"States.TaskFailed\"\n          ],\n          \"Next\": \"WorkflowErrorHandlerLambda\"\n        }\n      ]\n    },\n    \"BackupTableCleanup: All items removed?\": {\n      \"Type\": \"Choice\",\n      \"Choices\": [\n        {\n          \"Variable\": \"$.IsQueueEmpty\",\n          \"BooleanEquals\": true,\n          \"Next\": \"BackupTableCleanup: Yes, all items have been removed\"\n        }\n      ],\n      \"Default\": \"BackupTableCleanup: No, not all items have been removed\"\n    },\n    \"BackupTableCleanup: No, not all items have been removed\": {\n      \"Type\": \"Pass\",\n      \"Next\": \"BackupTableCleanup: Remove Items\"\n    },\n    \"BackupTableCleanup: Yes, all items have been removed\": {\n      \"Type\": \"Pass\",\n      \"Next\": \"WorkflowCleanupLambda\"\n    },\n    \"WorkflowCleanupLambda\": {\n      \"Type\": \"Task\",\n      \"Resource\": \"arn:aws:lambda:us-east-1:389435993474:function:StackSet-porter-cognito-e-WorkflowMessageBrokerLam-dfDWVG8f2k8z\",\n      \"Parameters\": {\n        \"Input.$\": \"$\",\n        \"Context.$\": \"$$\"\n      },\n      \"End\": true,\n      \"Catch\": [\n        {\n          \"ErrorEquals\": [\n            \"States.TaskFailed\"\n          ],\n          \"Next\": \"WorkflowErrorHandlerLambda\"\n        }\n      ]\n    },\n    \"WorkflowErrorHandlerLambda\": {\n      \"Type\": \"Task\",\n      \"Resource\": \"arn:aws:lambda:us-east-1:389435993474:function:StackSet-porter-cognito-e-WorkflowMessageBrokerLam-dfDWVG8f2k8z\",\n      \"Parameters\": {\n        \"Input.$\": \"$\",\n        \"Context.$\": \"$$\"\n      },\n      \"Next\": \"Unexpected workflow error\"\n    },\n    \"Unexpected workflow error\": {\n      \"Type\": \"Fail\",\n      \"Error\": \"UnexpectedErrorInWorkflow\",\n      \"Cause\": \"An unexpected error occured while executing this workflow. Please check logs for the State Machine task that generated this error for details\"\n    }\n  }\n}\n",
      "role_arn": "arn:aws:iam::389435993474:role/service-role/StackSet-porter-cognito-e-ExportWorkflowServiceRole-iSlO4whxyoY0",
      "type": "STANDARD",
      "logging_configuration": {
        "level": "OFF",
        "includeExecutionData": false
      },
      "tracing_configuration": {
        "enabled": false
      },
      "status": "ACTIVE",
      "creation_date": "2024-03-15T22:52:03.237000+00:00",
      "tags": {
        "aws:cloudformation:stack-name": "StackSet-porter-cognito-export-import-StackSet-43b0304e-fb81-4dae-87a0-b6b27edce4ff",
        "ManagedBy": "terraform",
        "aws:cloudformation:stack-id": "arn:aws:cloudformation:us-east-1:389435993474:stack/StackSet-porter-cognito-export-import-StackSet-43b0304e-fb81-4dae-87a0-b6b27edce4ff/4ab31b40-e31e-11ee-9bd8-12568d58ce57",
        "Environment": "qa",
        "Imported": "true",
        "aws:cloudformation:logical-id": "ExportWorkflow",
        "solution-id-SO0126": "porter-cognito-export-import-us-east-1"
      }
    },
    "arn:aws:states:us-east-1:389435993474:stateMachine:ImportWorkflow-yfzkkgbAbcea": {
      "name": "ImportWorkflow-yfzkkgbAbcea",
      "arn": "arn:aws:states:us-east-1:389435993474:stateMachine:ImportWorkflow-yfzkkgbAbcea",
      "definition": "{\n  \"Comment\": \"porter-cognito-export-import 1.0.4.2: Restores a new user pool with the state reflected in the backup table\",\n  \"StartAt\": \"CheckExecutionsLambda\",\n  \"States\": {\n    \"CheckExecutionsLambda\": {\n      \"Type\": \"Task\",\n      \"Resource\": \"arn:aws:lambda:us-east-1:389435993474:function:StackSet-porter-cognito-expo-CheckExecutionsLambda-hKnPasElXQEe\",\n      \"Parameters\": {\n        \"Input.$\": \"$\",\n        \"Context.$\": \"$$\"\n      },\n      \"OutputPath\": \"$.result\",\n      \"Next\": \"Only this execution running for this state machine?\",\n      \"Catch\": [\n        {\n          \"ErrorEquals\": [\n            \"States.TaskFailed\"\n          ],\n          \"Next\": \"WorkflowErrorHandlerLambda\"\n        }\n      ]\n    },\n    \"Only this execution running for this state machine?\": {\n      \"Type\": \"Choice\",\n      \"Choices\": [\n        {\n          \"Variable\": \"$.OnlyThisStateMachineExecution\",\n          \"BooleanEquals\": true,\n          \"Next\": \"Yes - only this execution is running\"\n        }\n      ],\n      \"Default\": \"No - at least one other execution is running\"\n    },\n    \"Yes - only this execution is running\": {\n      \"Type\": \"Pass\",\n      \"Next\": \"Wait 1 minute\"\n    },\n    \"No - at least one other execution is running\": {\n      \"Type\": \"Fail\",\n      \"Error\": \"AnotherExecutionRunning\",\n      \"Cause\": \"At least one other execution for this state machine was found to be running. Please check logs for CheckExecutionsLambda for details\"\n    },\n    \"Wait 1 minute\": {\n      \"Comment\": \"Wait 1 minute to allow queues to achieve consistency\",\n      \"Type\": \"Wait\",\n      \"Seconds\": 60,\n      \"Next\": \"CheckWorkflowQueuesLambda\"\n    },\n    \"CheckWorkflowQueuesLambda\": {\n      \"Type\": \"Task\",\n      \"Resource\": \"arn:aws:lambda:us-east-1:389435993474:function:StackSet-porter-cognito-e-CheckWorkflowQueuesLambd-1LdY7qdyyjtD\",\n      \"Parameters\": {\n        \"Input.$\": \"$\",\n        \"Context.$\": \"$$\"\n      },\n      \"OutputPath\": \"$.result\",\n      \"Next\": \"ImportCheckNewUserPoolLambda\",\n      \"Catch\": [\n        {\n          \"ErrorEquals\": [\n            \"States.TaskFailed\"\n          ],\n          \"Next\": \"WorkflowErrorHandlerLambda\"\n        }\n      ]\n    },\n    \"ImportCheckNewUserPoolLambda\": {\n      \"Type\": \"Task\",\n      \"Resource\": \"arn:aws:lambda:us-east-1:389435993474:function:StackSet-porter-cognito-e-ImportCheckNewUserPoolLa-556343XFd6OI\",\n      \"OutputPath\": \"$.result\",\n      \"Parameters\": {\n        \"Input.$\": \"$\",\n        \"Context.$\": \"$$\"\n      },\n      \"Next\": \"Is the new user pool empty?\",\n      \"Catch\": [\n        {\n          \"ErrorEquals\": [\n            \"States.TaskFailed\"\n          ],\n          \"Next\": \"WorkflowErrorHandlerLambda\"\n        }\n      ]\n    },\n    \"Is the new user pool empty?\": {\n      \"Type\": \"Choice\",\n      \"Choices\": [\n        {\n          \"Variable\": \"$.NewUserPoolEmpty\",\n          \"BooleanEquals\": true,\n          \"Next\": \"Yes - the new user pool is empty\"\n        }\n      ],\n      \"Default\": \"No - the new user pool is not empty\"\n    },\n    \"No - the new user pool is not empty\": {\n      \"Type\": \"Fail\",\n      \"Error\": \"NewUserPoolNotEmpty\",\n      \"Cause\": \"Please check logs for ImportCheckNewUserPoolLambda for details\"\n    },\n    \"Yes - the new user pool is empty\": {\n      \"Type\": \"Pass\",\n      \"Next\": \"Parallel: Scan table and import users\"\n    },\n    \"Parallel: Scan table and import users\":{\n      \"Type\": \"Parallel\",\n      \"Branches\": [\n        {\n          \"StartAt\": \"ImportScanTableLambda\",\n          \"States\": {\n            \"ImportScanTableLambda\": {\n              \"Type\": \"Task\",\n              \"Resource\": \"arn:aws:lambda:us-east-1:389435993474:function:StackSet-porter-cognito-expo-ImportScanTableLambda-8ZghCcmuM7a5\",\n              \"Parameters\": {\n                \"Input.$\": \"$\",\n                \"Context.$\": \"$$\"\n              },\n              \"OutputPath\": \"$.result\",\n              \"Next\": \"Finished Scanning Table?\",\n              \"Catch\": [\n                {\n                  \"ErrorEquals\": [\n                    \"States.TaskFailed\"\n                  ],\n                  \"Next\": \"Parallel: WorkflowErrorHandlerLambda (Scan Table)\"\n                }\n              ]\n            },\n            \"Finished Scanning Table?\": {\n              \"Type\": \"Choice\",\n              \"Choices\": [\n                {\n                  \"Variable\": \"$.AllGroupsProcessed\",\n                  \"StringEquals\": \"Yes\",\n                  \"Next\": \"Yes\"\n                },\n                {\n                  \"Variable\": \"$.AllGroupsProcessed\",\n                  \"StringEquals\": \"No\",\n                  \"Next\": \"No\"\n                }\n              ],\n              \"Default\": \"Yes\"\n            },\n            \"Yes\": {\n              \"Type\": \"Pass\",\n              \"End\": true\n            },\n            \"No\": {\n              \"Type\": \"Pass\",\n              \"Next\": \"ImportScanTableLambda\"\n            },\n            \"Parallel: WorkflowErrorHandlerLambda (Scan Table)\": {\n              \"Type\": \"Task\",\n              \"Resource\": \"arn:aws:lambda:us-east-1:389435993474:function:StackSet-porter-cognito-e-WorkflowMessageBrokerLam-dfDWVG8f2k8z\",\n              \"Parameters\": {\n                \"Input.$\": \"$\",\n                \"Context.$\": \"$$\"\n              },\n              \"Next\": \"Parallel: Unexpected workflow error (Scan Table)\"\n            },\n            \"Parallel: Unexpected workflow error (Scan Table)\": {\n              \"Type\": \"Fail\",\n              \"Error\": \"UnexpectedErrorInWorkflow\",\n              \"Cause\": \"An unexpected error occured while executing this workflow. Please check logs for the State Machine task that generated this error for details\"\n            }\n          }\n        },\n        {\n          \"StartAt\": \"Parallel: Wait 60 seconds\",\n          \"States\": {\n            \"Parallel: Wait 60 seconds\": {\n              \"Comment\": \"Wait 60 seconds to allow messages to be queued\",\n              \"Type\": \"Wait\",\n              \"Seconds\": 60,\n              \"Next\": \"Parallel: ImportNewUsers\"\n            },\n            \"Parallel: ImportNewUsers\": {\n              \"Type\": \"Task\",\n              \"Resource\": \"arn:aws:lambda:us-east-1:389435993474:function:StackSet-porter-cognito-expor-ImportNewUsersLambda-xkBvMaUYY3Uf\",\n              \"Parameters\": {\n                \"Input.$\": \"$\",\n                \"Context.$\": \"$$\"\n              },\n              \"OutputPath\": \"$.result\",\n              \"Next\": \"Parallel: Is User Import Job Running?\",\n              \"Catch\": [\n                {\n                  \"ErrorEquals\": [\n                    \"States.TaskFailed\"\n                  ],\n                  \"Next\": \"Parallel: WorkflowErrorHandlerLambda\"\n                }\n              ]\n            },\n            \"Parallel: Is User Import Job Running?\": {\n              \"Type\": \"Choice\",\n              \"Choices\": [\n                {\n                  \"Or\": [\n                    {\n                      \"Variable\": \"$.ImportJobStatus\",\n                      \"StringEquals\": \"Pending\"\n                    },\n                    {\n                      \"Variable\": \"$.ImportJobStatus\",\n                      \"StringEquals\": \"InProgress\"\n                    }\n                  ],\n                  \"Next\": \"Parallel: Yes - CSV is being imported\"\n                },\n                {\n                  \"Or\": [\n                    {\n                      \"Variable\": \"$.ImportJobStatus\",\n                      \"StringEquals\": \"Succeeded\"\n                    },\n                    {\n                      \"Variable\": \"$.ImportJobStatus\",\n                      \"StringEquals\": \"\"\n                    }\n                  ],\n                  \"Next\": \"Parallel: No import job running\"\n                }\n              ]\n            },\n            \"Parallel: Yes - CSV is being imported\": {\n              \"Type\": \"Pass\",\n              \"Next\": \"Parallel: Wait 30 seconds\"\n            },\n            \"Parallel: Wait 30 seconds\": {\n              \"Comment\": \"Wait 30 seconds before checking the import job again\",\n              \"Type\": \"Wait\",\n              \"Seconds\": 30,\n              \"Next\": \"Parallel: CheckUserImportJob\"\n            },\n            \"Parallel: CheckUserImportJob\": {\n              \"Type\": \"Task\",\n              \"Resource\": \"arn:aws:lambda:us-east-1:389435993474:function:StackSet-porter-cognito-e-ImportCheckImportJobLamb-ZfeQtHbsEaSK\",\n              \"Parameters\": {\n                \"Input.$\": \"$\",\n                \"Context.$\": \"$$\"\n              },\n              \"OutputPath\": \"$.result\",\n              \"Next\": \"Parallel: Is User Import Job Running?\",\n              \"Catch\": [\n                {\n                  \"ErrorEquals\": [\n                    \"States.TaskFailed\"\n                  ],\n                  \"Next\": \"Parallel: WorkflowErrorHandlerLambda\"\n                }\n              ]\n            },\n            \"Parallel: No import job running\": {\n              \"Type\": \"Pass\",\n              \"Next\": \"Parallel: Is New Users Queue Empty?\"\n            },\n            \"Parallel: Is New Users Queue Empty?\": {\n              \"Type\": \"Choice\",\n              \"Choices\": [\n                {\n                  \"Variable\": \"$.QueueEmpty\",\n                  \"BooleanEquals\": true,\n                  \"Next\": \"Parallel: Yes - New Users Queue has been drained\"\n                },\n                {\n                  \"Variable\": \"$.QueueEmpty\",\n                  \"BooleanEquals\": false,\n                  \"Next\": \"Parallel: No - New Users Queue is not empty\"\n                }\n              ]\n            },\n            \"Parallel: No - New Users Queue is not empty\": {\n              \"Type\": \"Pass\",\n              \"Next\": \"Parallel: ImportNewUsers\"\n            },\n            \"Parallel: Yes - New Users Queue has been drained\": {\n              \"Type\": \"Pass\",\n              \"End\": true\n            },\n            \"Parallel: WorkflowErrorHandlerLambda\": {\n              \"Type\": \"Task\",\n              \"Resource\": \"arn:aws:lambda:us-east-1:389435993474:function:StackSet-porter-cognito-e-WorkflowMessageBrokerLam-dfDWVG8f2k8z\",\n              \"Parameters\": {\n                \"Input.$\": \"$\",\n                \"Context.$\": \"$$\"\n              },\n              \"Next\": \"Parallel: Unexpected workflow error\"\n            },\n            \"Parallel: Unexpected workflow error\": {\n              \"Type\": \"Fail\",\n              \"Error\": \"UnexpectedErrorInWorkflow\",\n              \"Cause\": \"An unexpected error occured while executing this workflow. Please check logs for the State Machine task that generated this error for details\"\n            }\n          }\n        }\n      ],\n      \"Next\": \"Wait 60 seconds\"\n    },\n    \"Wait 60 seconds\": {\n      \"Comment\": \"Wait 60 seconds to allow users to be queued\",\n      \"Type\": \"Wait\",\n      \"Seconds\": 60,\n      \"Next\": \"ImportNewUsers\"\n    },\n    \"ImportNewUsers\": {\n      \"Type\": \"Task\",\n      \"Resource\": \"arn:aws:lambda:us-east-1:389435993474:function:StackSet-porter-cognito-expor-ImportNewUsersLambda-xkBvMaUYY3Uf\",\n      \"Parameters\": {\n        \"Input.$\": \"$\",\n        \"Context.$\": \"$$\"\n      },\n      \"OutputPath\": \"$.result\",\n      \"Next\": \"Is User Import Job Running?\",\n      \"Catch\": [\n        {\n          \"ErrorEquals\": [\n            \"States.TaskFailed\"\n          ],\n          \"Next\": \"WorkflowErrorHandlerLambda\"\n        }\n      ]\n    },\n    \"Is User Import Job Running?\": {\n      \"Type\": \"Choice\",\n      \"Choices\": [\n        {\n          \"Or\": [\n            {\n              \"Variable\": \"$.ImportJobStatus\",\n              \"StringEquals\": \"Pending\"\n            },\n            {\n              \"Variable\": \"$.ImportJobStatus\",\n              \"StringEquals\": \"InProgress\"\n            }\n          ],\n          \"Next\": \"Yes - CSV is being imported\"\n        },\n        {\n          \"Or\": [\n            {\n              \"Variable\": \"$.ImportJobStatus\",\n              \"StringEquals\": \"Succeeded\"\n            },\n            {\n              \"Variable\": \"$.ImportJobStatus\",\n              \"StringEquals\": \"\"\n            }\n          ],\n          \"Next\": \"No import job running\"\n        }\n      ]\n    },\n    \"Yes - CSV is being imported\": {\n      \"Type\": \"Pass\",\n      \"Next\": \"Wait 30 seconds\"\n    },\n    \"Wait 30 seconds\": {\n      \"Comment\": \"Wait 30 seconds before checking the import job again\",\n      \"Type\": \"Wait\",\n      \"Seconds\": 30,\n      \"Next\": \"CheckUserImportJob\"\n    },\n    \"CheckUserImportJob\": {\n      \"Type\": \"Task\",\n      \"Resource\": \"arn:aws:lambda:us-east-1:389435993474:function:StackSet-porter-cognito-e-ImportCheckImportJobLamb-ZfeQtHbsEaSK\",\n      \"Parameters\": {\n        \"Input.$\": \"$\",\n        \"Context.$\": \"$$\"\n      },\n      \"OutputPath\": \"$.result\",\n      \"Next\": \"Is User Import Job Running?\",\n      \"Catch\": [\n        {\n          \"ErrorEquals\": [\n            \"States.TaskFailed\"\n          ],\n          \"Next\": \"WorkflowErrorHandlerLambda\"\n        }\n      ]\n    },\n    \"No import job running\": {\n      \"Type\": \"Pass\",\n      \"Next\": \"Is New Users Queue Empty?\"\n    },\n    \"Is New Users Queue Empty?\": {\n      \"Type\": \"Choice\",\n      \"Choices\": [\n        {\n          \"Variable\": \"$.QueueEmpty\",\n          \"BooleanEquals\": true,\n          \"Next\": \"Yes - New Users Queue has been drained\"\n        },\n        {\n          \"Variable\": \"$.QueueEmpty\",\n          \"BooleanEquals\": false,\n          \"Next\": \"No - New Users Queue is not empty\"\n        }\n      ]\n    },\n    \"No - New Users Queue is not empty\": {\n      \"Type\": \"Pass\",\n      \"Next\": \"ImportNewUsers\"\n    },\n    \"Yes - New Users Queue has been drained\": {\n      \"Type\": \"Pass\",\n      \"Next\": \"UpdateNewUsers\"\n    },\n    \"UpdateNewUsers\": {\n      \"Type\": \"Task\",\n      \"Resource\": \"arn:aws:lambda:us-east-1:389435993474:function:StackSet-porter-cognito-e-ImportUpdateNewUsersLamb-PhR7Hv45788O\",\n      \"Parameters\": {\n        \"Input.$\": \"$\",\n        \"Context.$\": \"$$\"\n      },\n      \"OutputPath\": \"$.result\",\n      \"Next\": \"Is New Users Updates Queue Empty?\",\n      \"Catch\": [\n        {\n          \"ErrorEquals\": [\n            \"States.TaskFailed\"\n          ],\n          \"Next\": \"WorkflowErrorHandlerLambda\"\n        }\n      ]\n    },\n    \"Is New Users Updates Queue Empty?\": {\n      \"Type\": \"Choice\",\n      \"Choices\": [\n        {\n          \"Variable\": \"$.QueueEmpty\",\n          \"BooleanEquals\": true,\n          \"Next\": \"Yes - New Users Updates Queue has been drained\"\n        },\n        {\n          \"Variable\": \"$.QueueEmpty\",\n          \"BooleanEquals\": false,\n          \"Next\": \"No - New Users Updates Queue is not empty\"\n        }\n      ]\n    },\n    \"No - New Users Updates Queue is not empty\": {\n      \"Type\": \"Pass\",\n      \"Next\": \"UpdateNewUsers\"\n    },\n    \"Yes - New Users Updates Queue has been drained\": {\n      \"Type\": \"Pass\",\n      \"Next\": \"WorkflowCleanupLambda\"\n    },\n    \"WorkflowCleanupLambda\": {\n      \"Type\": \"Task\",\n      \"Resource\": \"arn:aws:lambda:us-east-1:389435993474:function:StackSet-porter-cognito-e-WorkflowMessageBrokerLam-dfDWVG8f2k8z\",\n      \"Parameters\": {\n        \"Input.$\": \"$\",\n        \"Context.$\": \"$$\"\n      },\n      \"End\": true,\n      \"Catch\": [\n        {\n          \"ErrorEquals\": [\n            \"States.TaskFailed\"\n          ],\n          \"Next\": \"WorkflowErrorHandlerLambda\"\n        }\n      ]\n    },\n    \"WorkflowErrorHandlerLambda\": {\n      \"Type\": \"Task\",\n      \"Resource\": \"arn:aws:lambda:us-east-1:389435993474:function:StackSet-porter-cognito-e-WorkflowMessageBrokerLam-dfDWVG8f2k8z\",\n      \"Parameters\": {\n        \"Input.$\": \"$\",\n        \"Context.$\": \"$$\"\n      },\n      \"Next\": \"Unexpected workflow error\"\n    },\n    \"Unexpected workflow error\": {\n      \"Type\": \"Fail\",\n      \"Error\": \"UnexpectedErrorInWorkflow\",\n      \"Cause\": \"An unexpected error occured while executing this workflow. Please check logs for the State Machine task that generated this error for details\"\n    }\n  }\n}\n",
      "role_arn": "arn:aws:iam::389435993474:role/service-role/StackSet-porter-cognito-e-ImportWorkflowServiceRole-pNzYhw9eGhhz",
      "type": "STANDARD",
      "logging_configuration": {
        "level": "OFF",
        "includeExecutionData": false
      },
      "tracing_configuration": {
        "enabled": false
      },
      "status": "ACTIVE",
      "creation_date": "2024-03-15T22:52:06.257000+00:00",
      "tags": {
        "aws:cloudformation:stack-name": "StackSet-porter-cognito-export-import-StackSet-43b0304e-fb81-4dae-87a0-b6b27edce4ff",
        "ManagedBy": "terraform",
        "aws:cloudformation:stack-id": "arn:aws:cloudformation:us-east-1:389435993474:stack/StackSet-porter-cognito-export-import-StackSet-43b0304e-fb81-4dae-87a0-b6b27edce4ff/4ab31b40-e31e-11ee-9bd8-12568d58ce57",
        "Environment": "qa",
        "Imported": "true",
        "aws:cloudformation:logical-id": "ImportWorkflow",
        "solution-id-SO0126": "porter-cognito-export-import-us-east-1"
      }
    },
    "arn:aws:states:us-east-1:389435993474:stateMachine:SecondaryUserPoolTableStepFunctions-derGiUYAqKT1": {
      "name": "SecondaryUserPoolTableStepFunctions-derGiUYAqKT1",
      "arn": "arn:aws:states:us-east-1:389435993474:stateMachine:SecondaryUserPoolTableStepFunctions-derGiUYAqKT1",
      "definition": "{\n  \"Comment\": \"porter-cognito-export-import 1.0.4.2: Checks if secondary DynamoDB global table is ready or not\",\n  \"StartAt\": \"GlobalTableChecker\",\n  \"States\": {\n    \"GlobalTableChecker\": {\n      \"Type\": \"Task\",\n      \"Resource\": \"arn:aws:lambda:us-east-1:389435993474:function:porter-cognito-export-import-GlobalTableChecker-N5FE8rCZvpE2\",\n      \"InputPath\": \"$\",\n      \"OutputPath\": \"$\",\n      \"Next\": \"Has Stream ARN?\"\n    },\n    \"Has Stream ARN?\": {\n      \"Type\": \"Choice\",\n      \"Choices\": [\n        {\n          \"Not\": {\n            \"Variable\": \"$.LatestStreamArn\",\n            \"StringEquals\": \"\"\n          },\n          \"Next\": \"Yes\"\n        },\n        {\n          \"Variable\": \"$.LatestStreamArn\",\n          \"StringEquals\": \"\",\n          \"Next\": \"No\"\n        }\n      ],\n      \"Default\": \"No\"\n    },\n    \"No\": {\n      \"Type\": \"Pass\",\n      \"Next\": \"Wait 1 sec\"\n    },\n    \"Wait 1 sec\": {\n      \"Comment\": \"A Wait state delays the state machine from continuing for a specified time.\",\n      \"Type\": \"Wait\",\n      \"Seconds\": 1,\n      \"Next\": \"GlobalTableChecker\"\n    },\n    \"Yes\": {\n      \"Type\": \"Pass\",\n      \"End\": true\n    }\n  }\n}\n",
      "role_arn": "arn:aws:iam::389435993474:role/service-role/porter-cognito-export-imp-SecondaryUserPoolTableSte-AojbPJtAK3aL",
      "type": "STANDARD",
      "logging_configuration": {
        "level": "OFF",
        "includeExecutionData": false
      },
      "tracing_configuration": {
        "enabled": false
      },
      "status": "ACTIVE",
      "creation_date": "2024-03-15T22:43:42.082000+00:00",
      "tags": {
        "aws:cloudformation:stack-name": "porter-cognito-export-import",
        "ManagedBy": "terraform",
        "aws:cloudformation:stack-id": "arn:aws:cloudformation:us-east-1:389435993474:stack/porter-cognito-export-import/4b2114c0-e31d-11ee-98a6-0e334a3035e3",
        "Environment": "qa",
        "Imported": "true",
        "aws:cloudformation:logical-id": "SecondaryUserPoolTableStepFunctions",
        "solution-id-SO0126": "porter-cognito-export-import-us-east-1"
      }
    },
    "arn:aws:states:us-east-1:389435993474:stateMachine:StackSetCheckStatusWorkflow-o9HrTcAjPF0K": {
      "name": "StackSetCheckStatusWorkflow-o9HrTcAjPF0K",
      "arn": "arn:aws:states:us-east-1:389435993474:stateMachine:StackSetCheckStatusWorkflow-o9HrTcAjPF0K",
      "definition": "{\n  \"Comment\": \"porter-cognito-export-import 1.0.4.2: Checks the status of the solution's StackSet and when ready, responds to CloudFormation\",\n  \"StartAt\": \"StackSetCheckStatusLambda\",\n  \"States\": {\n    \"StackSetCheckStatusLambda\": {\n      \"Type\": \"Task\",\n      \"Resource\": \"arn:aws:lambda:us-east-1:389435993474:function:porter-cognito-export-imp-StackSetCheckStatusLambd-NXoLsRhMIoXG\",\n      \"Parameters\": {\n        \"Input.$\": \"$\",\n        \"Context.$\": \"$$\"\n      },\n      \"OutputPath\": \"$.result\",\n      \"Next\": \"Has responded to CloudFormation?\"\n    },\n    \"Has responded to CloudFormation?\": {\n      \"Type\": \"Choice\",\n      \"Choices\": [\n        {\n          \"Variable\": \"$.HasRespondedToCfn\",\n          \"BooleanEquals\": true,\n          \"Next\": \"Yes\"\n        }\n      ],\n      \"Default\": \"No\"\n    },\n    \"No\": {\n      \"Type\": \"Pass\",\n      \"Next\": \"Wait 5 sec\"\n    },\n    \"Wait 5 sec\": {\n      \"Comment\": \"A Wait state delays the state machine from continuing for a specified time.\",\n      \"Type\": \"Wait\",\n      \"Seconds\": 5,\n      \"Next\": \"StackSetCheckStatusLambda\"\n    },\n    \"Yes\": {\n      \"Type\": \"Pass\",\n      \"End\": true\n    }\n  }\n}\n",
      "role_arn": "arn:aws:iam::389435993474:role/service-role/porter-cognito-export-imp-StackSetCheckStatusWorkfl-3FEMTdHtq4r5",
      "type": "STANDARD",
      "logging_configuration": {
        "level": "OFF",
        "includeExecutionData": false
      },
      "tracing_configuration": {
        "enabled": false
      },
      "status": "ACTIVE",
      "creation_date": "2024-03-15T22:46:21.317000+00:00",
      "tags": {
        "aws:cloudformation:stack-name": "porter-cognito-export-import",
        "ManagedBy": "terraform",
        "aws:cloudformation:stack-id": "arn:aws:cloudformation:us-east-1:389435993474:stack/porter-cognito-export-import/4b2114c0-e31d-11ee-98a6-0e334a3035e3",
        "Environment": "qa",
        "Imported": "true",
        "aws:cloudformation:logical-id": "StackSetCheckStatusWorkflow",
        "solution-id-SO0126": "porter-cognito-export-import-us-east-1"
      }
    }
  }
}